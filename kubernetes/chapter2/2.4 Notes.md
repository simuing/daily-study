## 2.4 생명주기 프로브를 이용한 안정적인 업데이트

롤링 업데이트 과정 중 새로운 버전의 파드가 정상적으로 배포되었음을 판단하는 순간은 준비성 프로브가 정상 응답을 보내는 때이다. 만약 준비성 프로브를 명시하지 않았다면 쿠버네티스는 프로세스의 실행과 동시에 준비성 프로브를 성공으로 처리하기 때문에 바로 파드에 클라이언트의 요청을 전달하기 시작한다.

무중단 업데이트를 지향한다면 애플리케이션에 보내는 모든 요청은 업데이트 중 어느 시점에도 항상 응답을 받을 수 있어야 한다. 롤링 업데이트 전략을 사용했음에도 무중단 업데이트에 실패하는 경우는 크게 두 가지이다. 
1. 현재 실행 중인 파드의 숫자가 0이 되는 구간이 발생하는 경우로, `maxUnavailable`이 100%인 디플로이먼트를 업데이트하는 상황 
2. 요청을 전달했지만 파드가 이를 제대로 처리하지 못하는 상황

이 문제를 해결하기 위해 우리는 우아한 종료 절차를 활용할 수 있다.

준비성 프로브와 우아한 종료 절차를 지원하는 파드를 업데이트할 경우 쿠버네티스는 새로운 파드의 초기화가 완료된 시점에 기존 파드를 종료하기 시작하며, 기존 파드 역시 모든 요청을 확실히 처리한 뒤 종료되기 때문에 서비스가 중단되는 일이 없도록 해준다.